<!DOCTYPE html>
<html lang="en">
<head>
    <title>My To Do List</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>

    <div class="nav">
        <h1>Hi, Let's Get it Done :)</h1>
    </div>

    <div class="container">
        <h1>My To Do List</h1>

        <!-- Show "Welcome" message if no tasks exist -->
        <% if (tasks.length === 0) { %>
            <p>Welcome to My To Do List! Start by adding your first task.</p>
            <br>
        <% } else { %>
            <ul>
                <% tasks.forEach(task => { %>
                    <li class="task-item">
                        <!-- Checkbox -->
                        <input type="checkbox" class="task-checkbox" data-task-id="<%= task._id %>" 
                            <% if (task.status === "completed") { %> checked <% } %> >
                        
                        <span class="task-text <% if (task.status === 'completed') { %> crossed-out <% } %>">
                            <%= task.task %>
                        </span>
            
                        <!-- Delete Button -->
                        <form action="/tasks/<%= task._id %>?_method=DELETE" method="POST" class="delete-form">
                            <button type="submit" class="delete-btn">❌</button>
                        </form>
                    </li>
                <% }) %>
            </ul>
        <% } %>

        <div class="task-form">
            <h3>Add a New Task</h3>
            <form action="/tasks" method="POST">
                <input type="text" name="task" placeholder="Enter your task" required>
                <button type="submit">➕ Add Task</button>
            </form>
        </div>

    </div>
    <script src="/script.js"></script>
</body>
</html>
